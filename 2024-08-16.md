---
layout: post
author: Gary Fuller
title: 16/08/2024
---

Suggestions from Matt in stand-up:

Use tricks from Typo3 conference

app.flashes in twig templates with messages - Matt pointed me at the docs page. Not sure how I missed this [https://symfony.com/doc/current/session.html#flash-messages](https://symfony.com/doc/current/session.html#flash-messages). 

Mailer isn't sending through server but settings appear to be right. Showed me a trick for setting recipient on dev.

PHP documenter or similar worth looking into.

Tried the config from Lighthouse - the member management system we made. Doesn't seem to have fixed it. 

Had a brief meeting with Matt to show him the issue. It turned out that the messenger component was trying to send the email messages asynchronously. The command below sent all the emails:

```php
php bin/console messenger:consume async -vv
```

He then told me the config to set it to send immediately.

I've added Twig and Async email as a todo comment. Strictly speaking, according to a talk at T3DD2024, I should just do the work or add an issue to GitLab. As I'm not using GitLab to trakc thr project, I'll hold off for now. 

Received an answer to my forum question last night. Have added a follow up question about formatting.

Excerpt from the mail log to show my email went through:

```
Aug 16 11:52:26 grimond postfix/qmgr[2246]: CCA04209B1: from=<tellyourmp@praterraines.uk>, size=1788, nrcpt=1 (queue active)
Aug 16 11:52:26 grimond amavis[2359585]: (2359585-07) Passed CLEAN {RelayedInbound}, [77.104.146.131]:64020 [77.104.146.131] <tellyourmp@praterraines.uk> -> <gary@praterraines.co.uk>, Queue-ID: 3004020FEE, Message-ID: <46065d303cd6ce5307be11961c081c29@praterraines.uk>, mail_id: d-SqDXM6h-FL, Hits: 1.307, size: 1137, queued_as: CCA04209B1, dkim_sd=pr1:praterraines.uk, 4581 ms
```
